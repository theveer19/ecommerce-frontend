"use strict";(self.webpackChunkmy_ecommerce_frontend=self.webpackChunkmy_ecommerce_frontend||[]).push([[869],{6869(e,s,r){r.r(s),r.d(s,{default:()=>G});var n=r(9379),i=r(5043),l=r(3216),t=r(2720),a=r(3969),o=r(9806),d=r(2579),c=r(5895),x=r(2097),u=r(3089),h=r(1244),p=r(4799),A=r(6154),g=r(256),j=r(9067),m=r(183),v=r(7471),f=r(8259),b=r(172),C=r(7443),S=r(756),_=r(6172),W=r(1341),w=r(4375),y=r(3759),k=r(3023),R=r(1911),F=r(8776),B=r(5877),E=r(916),P=r(6803),T=r(8315),z=r(3974),I=r(3201),L=r(4856),O=r(9302),D=r(6691),N=r(3665),U=r(7359),q=r(908),H=r(579);function G(){var e,s;const[r,G]=(0,i.useState)([]),[J,M]=(0,i.useState)([]),[Z,$]=(0,i.useState)(!0),[K,Q]=(0,i.useState)(""),[V,X]=(0,i.useState)("all"),[Y,ee]=(0,i.useState)([null,null]),[se,re]=(0,i.useState)(!1),[ne,ie]=(0,i.useState)(null),[le,te]=(0,i.useState)({open:!1,message:"",severity:"success"}),ae=(0,l.Zp)(),oe={pageWrapper:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",pb:8,pt:4},glassPanel:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.07)",transition:"all 0.4s ease"},gradientText:{background:"linear-gradient(45deg, #111 30%, #555 90%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:900},tableRow:{transition:"all 0.2s ease","&:hover":{background:"rgba(255,255,255,0.9) !important",transform:"scale(1.005)",zIndex:2,position:"relative"}}};(0,i.useEffect)(()=>{de()},[]),(0,i.useEffect)(()=>{ce()},[r,K,V,Y]);const de=async()=>{try{const{data:e,error:s}=await t.N.from("orders").select("\n          *,\n          order_items (\n            id, quantity, price_at_time, product_id,\n            products (name, image_url)\n          ),\n          profiles (email, full_name, phone)\n        ").order("created_at",{ascending:!1});if(s)throw s;G(e||[]),M(e||[])}catch(e){console.error("Error fetching orders:",e),he("Error loading orders","error")}finally{$(!1)}},ce=()=>{let e=r;if(K){const s=K.toLowerCase();e=e.filter(e=>{var r,n,i,l,t,a;return(null===(r=e.order_number)||void 0===r?void 0:r.toLowerCase().includes(s))||(null===(n=e.id)||void 0===n?void 0:n.toLowerCase().includes(s))||(null===(i=e.shipping_address)||void 0===i||null===(l=i.name)||void 0===l?void 0:l.toLowerCase().includes(s))||(null===(t=e.profiles)||void 0===t||null===(a=t.email)||void 0===a?void 0:a.toLowerCase().includes(s))})}"all"!==V&&(e=e.filter(e=>e.status===V)),M(e)},xe={totalRevenue:r.reduce((e,s)=>e+Number(s.total_amount||0),0),pending:r.filter(e=>"pending"===e.status).length,processing:r.filter(e=>"processing"===e.status).length,total:r.length},ue=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return"#F59E0B";case"processing":return"#3B82F6";case"shipped":return"#8B5CF6";case"delivered":return"#10B981";case"cancelled":return"#EF4444";default:return"#6B7280"}},he=function(e){return te({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})};return(0,H.jsx)(U.$J,{dateAdapter:q.h,children:(0,H.jsx)(a.A,{sx:oe.pageWrapper,children:(0,H.jsxs)(o.A,{maxWidth:"xl",children:[(0,H.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:5},children:[(0,H.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,H.jsx)(d.A,{onClick:()=>ae("/admin"),sx:{bgcolor:"white"},children:(0,H.jsx)(T.A,{})}),(0,H.jsx)(c.A,{variant:"h3",sx:oe.gradientText,children:"Order Command"})]}),(0,H.jsx)(x.A,{variant:"outlined",startIcon:(0,H.jsx)(O.A,{}),onClick:de,sx:{borderRadius:"30px"},children:"Refresh"})]}),(0,H.jsx)(u.A,{container:!0,spacing:3,sx:{mb:5},children:[{title:"Total Revenue",value:"\u20b9".concat(xe.totalRevenue.toLocaleString()),icon:(0,H.jsx)(z.A,{}),color:"#10B981"},{title:"Pending",value:xe.pending,icon:(0,H.jsx)(D.A,{}),color:"#F59E0B"},{title:"Processing",value:xe.processing,icon:(0,H.jsx)(L.A,{}),color:"#3B82F6"}].map((e,s)=>(0,H.jsx)(u.A,{item:!0,xs:12,md:4,children:(0,H.jsx)(h.A,{sx:(0,n.A)((0,n.A)({},oe.glassPanel),{},{p:2}),children:(0,H.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,H.jsx)(a.A,{sx:{p:1.5,borderRadius:"12px",bgcolor:"".concat(e.color,"20"),color:e.color},children:e.icon}),(0,H.jsxs)(a.A,{children:[(0,H.jsx)(c.A,{variant:"h4",fontWeight:800,children:e.value}),(0,H.jsx)(c.A,{variant:"caption",color:"text.secondary",children:e.title})]})]})})},s))}),(0,H.jsx)(p.A,{sx:(0,n.A)((0,n.A)({},oe.glassPanel),{},{p:3,mb:4}),children:(0,H.jsxs)(u.A,{container:!0,spacing:2,children:[(0,H.jsx)(u.A,{item:!0,xs:12,md:4,children:(0,H.jsx)(A.A,{fullWidth:!0,placeholder:"Search...",value:K,onChange:e=>Q(e.target.value),size:"small"})}),(0,H.jsx)(u.A,{item:!0,xs:12,md:3,children:(0,H.jsxs)(g.A,{fullWidth:!0,size:"small",children:[(0,H.jsx)(j.A,{children:"Status"}),(0,H.jsxs)(m.A,{value:V,onChange:e=>X(e.target.value),label:"Status",children:[(0,H.jsx)(v.A,{value:"all",children:"All"}),(0,H.jsx)(v.A,{value:"pending",children:"Pending"}),(0,H.jsx)(v.A,{value:"processing",children:"Processing"}),(0,H.jsx)(v.A,{value:"shipped",children:"Shipped"}),(0,H.jsx)(v.A,{value:"delivered",children:"Delivered"})]})]})})]})}),(0,H.jsx)(f.A,{component:p.A,sx:(0,n.A)((0,n.A)({},oe.glassPanel),{},{mb:8}),children:Z?(0,H.jsx)(a.A,{sx:{p:5,textAlign:"center"},children:(0,H.jsx)(b.A,{})}):(0,H.jsxs)(C.A,{children:[(0,H.jsx)(S.A,{sx:{bgcolor:"rgba(0,0,0,0.03)"},children:(0,H.jsxs)(_.A,{children:[(0,H.jsx)(W.A,{fontWeight:800,children:"ORDER ID"}),(0,H.jsx)(W.A,{fontWeight:800,children:"CUSTOMER"}),(0,H.jsx)(W.A,{fontWeight:800,children:"TOTAL"}),(0,H.jsx)(W.A,{fontWeight:800,children:"STATUS"}),(0,H.jsx)(W.A,{fontWeight:800,children:"ACTIONS"})]})}),(0,H.jsx)(w.A,{children:J.map(e=>{var s,r,n,i;return(0,H.jsxs)(_.A,{sx:oe.tableRow,children:[(0,H.jsx)(W.A,{children:(0,H.jsx)(y.A,{label:e.order_number||e.id.slice(0,8).toUpperCase(),sx:{borderRadius:"8px",fontWeight:700}})}),(0,H.jsxs)(W.A,{children:[(0,H.jsx)(c.A,{variant:"subtitle2",fontWeight:700,children:(null===(s=e.shipping_address)||void 0===s?void 0:s.name)||(null===(r=e.profiles)||void 0===r?void 0:r.full_name)||"Guest"}),(0,H.jsx)(c.A,{variant:"caption",children:null===(n=e.profiles)||void 0===n?void 0:n.email})]}),(0,H.jsxs)(W.A,{sx:{fontWeight:800},children:["\u20b9",Number(e.total_amount||0).toFixed(2)]}),(0,H.jsx)(W.A,{children:(0,H.jsx)(y.A,{label:null===(i=e.status)||void 0===i?void 0:i.toUpperCase(),size:"small",sx:{bgcolor:"".concat(ue(e.status),"20"),color:ue(e.status),fontWeight:800}})}),(0,H.jsx)(W.A,{children:(0,H.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,H.jsx)(d.A,{size:"small",onClick:()=>{ie(e),re(!0)},children:(0,H.jsx)(N.A,{fontSize:"small"})}),"pending"===e.status&&(0,H.jsx)(d.A,{size:"small",onClick:()=>(async(e,s)=>{try{const{error:r}=await t.N.from("orders").update({status:s,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;he("Order status updated to ".concat(s),"success"),de()}catch(r){he("Error updating status","error")}})(e.id,"processing"),sx:{color:"#3B82F6"},children:(0,H.jsx)(I.A,{fontSize:"small"})})]})})]},e.id)})})]})}),(0,H.jsx)(k.A,{open:se,onClose:()=>re(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"24px"}},children:ne&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(R.A,{children:["Order #",ne.order_number||ne.id.slice(0,8)]}),(0,H.jsx)(F.A,{dividers:!0,children:(0,H.jsxs)(u.A,{container:!0,spacing:2,children:[(0,H.jsxs)(u.A,{item:!0,xs:6,children:[(0,H.jsx)(c.A,{variant:"subtitle2",children:"Customer"}),(0,H.jsx)(c.A,{children:null===(e=ne.shipping_address)||void 0===e?void 0:e.name})]}),(0,H.jsxs)(u.A,{item:!0,xs:6,children:[(0,H.jsx)(c.A,{variant:"subtitle2",children:"Shipping"}),(0,H.jsx)(c.A,{children:null===(s=ne.shipping_address)||void 0===s?void 0:s.address})]})]})}),(0,H.jsx)(B.A,{children:(0,H.jsx)(x.A,{onClick:()=>re(!1),children:"Close"})})]})}),(0,H.jsx)(E.A,{open:le.open,autoHideDuration:4e3,onClose:()=>te((0,n.A)((0,n.A)({},le),{},{open:!1})),children:(0,H.jsx)(P.A,{severity:le.severity,children:le.message})})]})})})}}}]);
//# sourceMappingURL=869.025dfcc6.chunk.js.map