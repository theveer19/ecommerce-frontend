{"version":3,"file":"static/js/869.025dfcc6.chunk.js","mappings":"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","sources":["pages/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"../supabase/supabaseClient\";\r\nimport {\r\n  Box, Typography, Paper, Table, TableBody, TableCell, TableContainer,\r\n  TableHead, TableRow, Chip, IconButton, Button, TextField, MenuItem,\r\n  Select, FormControl, InputLabel, Dialog, DialogTitle, DialogContent,\r\n  DialogActions, Snackbar, Alert, CircularProgress, Tooltip, Grid,\r\n  Card, CardContent, Container, Avatar, useTheme\r\n} from \"@mui/material\";\r\nimport {\r\n  Visibility, Edit, CheckCircle, Cancel, Refresh, Search, FilterList,\r\n  Download, LocalShipping, AttachMoney, Person, LocationOn, ShoppingBag, ArrowBack\r\n} from \"@mui/icons-material\";\r\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\r\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\r\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\r\n\r\nexport default function AdminOrders() {\r\n  const [orders, setOrders] = useState([]);\r\n  const [filteredOrders, setFilteredOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [dateRange, setDateRange] = useState([null, null]);\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: \"\", severity: \"success\" });\r\n  \r\n  const navigate = useNavigate();\r\n\r\n  // Styles\r\n  const styles = {\r\n    pageWrapper: { background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)', minHeight: '100vh', pb: 8, pt: 4 },\r\n    glassPanel: { background: 'rgba(255, 255, 255, 0.8)', backdropFilter: 'blur(20px)', borderRadius: '24px', border: '1px solid rgba(255, 255, 255, 0.9)', boxShadow: '0 8px 32px 0 rgba(31, 38, 135, 0.07)', transition: 'all 0.4s ease' },\r\n    gradientText: { background: 'linear-gradient(45deg, #111 30%, #555 90%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', fontWeight: 900 },\r\n    tableRow: { transition: 'all 0.2s ease', '&:hover': { background: 'rgba(255,255,255,0.9) !important', transform: 'scale(1.005)', zIndex: 2, position: 'relative' } }\r\n  };\r\n\r\n  useEffect(() => { fetchOrders(); }, []);\r\n  useEffect(() => { filterOrders(); }, [orders, searchTerm, statusFilter, dateRange]);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      // ✅ STEP 7: Updated Query (profiles instead of users)\r\n      const { data, error } = await supabase\r\n        .from(\"orders\")\r\n        .select(`\r\n          *,\r\n          order_items (\r\n            id, quantity, price_at_time, product_id,\r\n            products (name, image_url)\r\n          ),\r\n          profiles (email, full_name, phone)\r\n        `)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setOrders(data || []);\r\n      setFilteredOrders(data || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching orders:\", error);\r\n      showSnackbar(\"Error loading orders\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filterOrders = () => {\r\n    let filtered = orders;\r\n    if (searchTerm) {\r\n      const lowerTerm = searchTerm.toLowerCase();\r\n      filtered = filtered.filter(order =>\r\n        order.order_number?.toLowerCase().includes(lowerTerm) ||\r\n        order.id?.toLowerCase().includes(lowerTerm) ||\r\n        order.shipping_address?.name?.toLowerCase().includes(lowerTerm) ||\r\n        // ✅ STEP 8: Filter using profiles\r\n        order.profiles?.email?.toLowerCase().includes(lowerTerm)\r\n      );\r\n    }\r\n    if (statusFilter !== \"all\") {\r\n      filtered = filtered.filter(order => order.status === statusFilter);\r\n    }\r\n    setFilteredOrders(filtered);\r\n  };\r\n\r\n  const handleUpdateStatus = async (orderId, newStatus) => {\r\n    try {\r\n      const { error } = await supabase.from(\"orders\").update({ status: newStatus, updated_at: new Date().toISOString() }).eq(\"id\", orderId);\r\n      if (error) throw error;\r\n      showSnackbar(`Order status updated to ${newStatus}`, \"success\");\r\n      fetchOrders(); \r\n    } catch (error) { showSnackbar(\"Error updating status\", \"error\"); }\r\n  };\r\n\r\n  const calculateStats = () => {\r\n    // ✅ STEP 9: Safe Totals\r\n    const totalRevenue = orders.reduce((sum, order) => sum + Number(order.total_amount || 0), 0);\r\n    return {\r\n      totalRevenue,\r\n      pending: orders.filter(o => o.status === 'pending').length,\r\n      processing: orders.filter(o => o.status === 'processing').length,\r\n      total: orders.length\r\n    };\r\n  };\r\n  const stats = calculateStats();\r\n\r\n  const getStatusColor = (status) => {\r\n    switch(status?.toLowerCase()) {\r\n      case 'pending': return '#F59E0B'; case 'processing': return '#3B82F6';\r\n      case 'shipped': return '#8B5CF6'; case 'delivered': return '#10B981';\r\n      case 'cancelled': return '#EF4444'; default: return '#6B7280';\r\n    }\r\n  };\r\n\r\n  const showSnackbar = (message, severity = \"success\") => setSnackbar({ open: true, message, severity });\r\n\r\n  return (\r\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n      <Box sx={styles.pageWrapper}>\r\n        <Container maxWidth=\"xl\">\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 5 }}>\r\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n              <IconButton onClick={() => navigate('/admin')} sx={{ bgcolor: 'white' }}><ArrowBack /></IconButton>\r\n              <Typography variant=\"h3\" sx={styles.gradientText}>Order Command</Typography>\r\n            </Box>\r\n            <Button variant=\"outlined\" startIcon={<Refresh />} onClick={fetchOrders} sx={{ borderRadius: '30px' }}>Refresh</Button>\r\n          </Box>\r\n\r\n          <Grid container spacing={3} sx={{ mb: 5 }}>\r\n            {[{ title: \"Total Revenue\", value: `₹${stats.totalRevenue.toLocaleString()}`, icon: <AttachMoney/>, color: \"#10B981\" },\r\n              { title: \"Pending\", value: stats.pending, icon: <ShoppingBag/>, color: \"#F59E0B\" },\r\n              { title: \"Processing\", value: stats.processing, icon: <LocalShipping/>, color: \"#3B82F6\" }\r\n            ].map((stat, i) => (\r\n              <Grid item xs={12} md={4} key={i}>\r\n                <Card sx={{ ...styles.glassPanel, p: 2 }}>\r\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                    <Box sx={{ p: 1.5, borderRadius: '12px', bgcolor: `${stat.color}20`, color: stat.color }}>{stat.icon}</Box>\r\n                    <Box>\r\n                      <Typography variant=\"h4\" fontWeight={800}>{stat.value}</Typography>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">{stat.title}</Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n\r\n          <Paper sx={{ ...styles.glassPanel, p: 3, mb: 4 }}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} md={4}>\r\n                <TextField fullWidth placeholder=\"Search...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} size=\"small\" />\r\n              </Grid>\r\n              <Grid item xs={12} md={3}>\r\n                <FormControl fullWidth size=\"small\">\r\n                  <InputLabel>Status</InputLabel>\r\n                  <Select value={statusFilter} onChange={(e) => setStatusFilter(e.target.value)} label=\"Status\">\r\n                    <MenuItem value=\"all\">All</MenuItem><MenuItem value=\"pending\">Pending</MenuItem><MenuItem value=\"processing\">Processing</MenuItem><MenuItem value=\"shipped\">Shipped</MenuItem><MenuItem value=\"delivered\">Delivered</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            </Grid>\r\n          </Paper>\r\n\r\n          <TableContainer component={Paper} sx={{ ...styles.glassPanel, mb: 8 }}>\r\n            {loading ? <Box sx={{ p: 5, textAlign: 'center' }}><CircularProgress /></Box> : (\r\n              <Table>\r\n                <TableHead sx={{ bgcolor: 'rgba(0,0,0,0.03)' }}>\r\n                  <TableRow>\r\n                    <TableCell fontWeight={800}>ORDER ID</TableCell>\r\n                    <TableCell fontWeight={800}>CUSTOMER</TableCell>\r\n                    <TableCell fontWeight={800}>TOTAL</TableCell>\r\n                    <TableCell fontWeight={800}>STATUS</TableCell>\r\n                    <TableCell fontWeight={800}>ACTIONS</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {filteredOrders.map((order) => (\r\n                    <TableRow key={order.id} sx={styles.tableRow}>\r\n                      <TableCell><Chip label={order.order_number || order.id.slice(0, 8).toUpperCase()} sx={{ borderRadius: '8px', fontWeight: 700 }} /></TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"subtitle2\" fontWeight={700}>\r\n                          {/* ✅ STEP 8: Safe Customer Access */}\r\n                          {order.shipping_address?.name || order.profiles?.full_name || 'Guest'}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\">{order.profiles?.email}</Typography>\r\n                      </TableCell>\r\n                      <TableCell sx={{ fontWeight: 800 }}>₹{Number(order.total_amount || 0).toFixed(2)}</TableCell>\r\n                      <TableCell><Chip label={order.status?.toUpperCase()} size=\"small\" sx={{ bgcolor: `${getStatusColor(order.status)}20`, color: getStatusColor(order.status), fontWeight: 800 }} /></TableCell>\r\n                      <TableCell>\r\n                        <Box sx={{ display: 'flex', gap: 1 }}>\r\n                          <IconButton size=\"small\" onClick={() => { setSelectedOrder(order); setOpenDialog(true); }}><Visibility fontSize=\"small\" /></IconButton>\r\n                          {order.status === 'pending' && <IconButton size=\"small\" onClick={() => handleUpdateStatus(order.id, 'processing')} sx={{ color: '#3B82F6' }}><CheckCircle fontSize=\"small\" /></IconButton>}\r\n                        </Box>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            )}\r\n          </TableContainer>\r\n\r\n          <Dialog open={openDialog} onClose={() => setOpenDialog(false)} maxWidth=\"md\" fullWidth PaperProps={{ sx: { borderRadius: '24px' } }}>\r\n            {selectedOrder && (\r\n              <>\r\n                <DialogTitle>Order #{selectedOrder.order_number || selectedOrder.id.slice(0,8)}</DialogTitle>\r\n                <DialogContent dividers>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item xs={6}><Typography variant=\"subtitle2\">Customer</Typography><Typography>{selectedOrder.shipping_address?.name}</Typography></Grid>\r\n                    <Grid item xs={6}><Typography variant=\"subtitle2\">Shipping</Typography><Typography>{selectedOrder.shipping_address?.address}</Typography></Grid>\r\n                  </Grid>\r\n                </DialogContent>\r\n                <DialogActions><Button onClick={() => setOpenDialog(false)}>Close</Button></DialogActions>\r\n              </>\r\n            )}\r\n          </Dialog>\r\n          <Snackbar open={snackbar.open} autoHideDuration={4000} onClose={() => setSnackbar({ ...snackbar, open: false })}><Alert severity={snackbar.severity}>{snackbar.message}</Alert></Snackbar>\r\n        </Container>\r\n      </Box>\r\n    </LocalizationProvider>\r\n  );\r\n}"],"names":["AdminOrders","_selectedOrder$shippi","_selectedOrder$shippi2","orders","setOrders","useState","filteredOrders","setFilteredOrders","loading","setLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","dateRange","setDateRange","openDialog","setOpenDialog","selectedOrder","setSelectedOrder","snackbar","setSnackbar","open","message","severity","navigate","useNavigate","styles","pageWrapper","background","minHeight","pb","pt","glassPanel","backdropFilter","borderRadius","border","boxShadow","transition","gradientText","WebkitBackgroundClip","WebkitTextFillColor","fontWeight","tableRow","transform","zIndex","position","useEffect","fetchOrders","filterOrders","async","data","error","supabase","from","select","order","ascending","console","showSnackbar","filtered","lowerTerm","toLowerCase","filter","_order$order_number","_order$id","_order$shipping_addre","_order$shipping_addre2","_order$profiles","_order$profiles$email","order_number","includes","id","shipping_address","name","profiles","email","status","stats","totalRevenue","reduce","sum","Number","total_amount","pending","o","length","processing","total","getStatusColor","arguments","undefined","_jsx","LocalizationProvider","dateAdapter","AdapterDateFns","children","Box","sx","_jsxs","Container","maxWidth","display","justifyContent","alignItems","mb","gap","IconButton","onClick","bgcolor","ArrowBack","Typography","variant","Button","startIcon","Refresh","Grid","container","spacing","title","value","concat","toLocaleString","icon","AttachMoney","color","ShoppingBag","LocalShipping","map","stat","i","item","xs","md","Card","_objectSpread","p","Paper","TextField","fullWidth","placeholder","onChange","e","target","size","FormControl","InputLabel","Select","label","MenuItem","TableContainer","component","textAlign","CircularProgress","Table","TableHead","TableRow","TableCell","TableBody","_order$shipping_addre3","_order$profiles2","_order$profiles3","_order$status","Chip","slice","toUpperCase","full_name","toFixed","Visibility","fontSize","orderId","newStatus","update","updated_at","Date","toISOString","eq","handleUpdateStatus","CheckCircle","Dialog","onClose","PaperProps","_Fragment","DialogTitle","DialogContent","dividers","address","DialogActions","Snackbar","autoHideDuration","Alert"],"ignoreList":[],"sourceRoot":""}