"use strict";(self.webpackChunkmy_ecommerce_frontend=self.webpackChunkmy_ecommerce_frontend||[]).push([[143],{2143(e,s,t){t.r(s),t.d(s,{default:()=>Q});var r=t(9379),a=t(5043),n=t(1244),i=t(6128),o=t(3969),l=t(3759),c=t(5895),d=t(9806),x=t(2097),h=t(3309),A=t(2843),u=t(172),m=t(3089),j=t(4799),p=t(8259),g=t(7443),b=t(756),f=t(6172),y=t(1341),v=t(4375),k=t(2579),w=t(7873),C=t(916),P=t(6803),S=t(2950),R=t(311),W=t(3974),O=t(7721),I=t(5362),_=t(1773),z=t(6245),T=t(102),E=t(7601),F=t(5151),N=t(8236),U=t(3216),D=t(2720),Y=t(95),M=t(379),B=t(1180),K=t(7869),q=t(6102),V=t(7734),X=t(8197),H=t(2185),J=t(6026),G=t(1474),L=t(6992),Z=t(579);function Q(){const[e,s]=(0,a.useState)(0),[t,Q]=(0,a.useState)([]),[$,ee]=(0,a.useState)([]),[se,te]=(0,a.useState)([]),[re,ae]=(0,a.useState)({products:!0,orders:!0,users:!0}),[ne,ie]=(0,a.useState)({totalProducts:0,totalOrders:0,totalUsers:0,totalRevenue:0,pendingOrders:0,lowStockProducts:0}),[oe,le]=(0,a.useState)({open:!1,message:"",severity:"success"}),ce=(0,U.Zp)();(0,a.useEffect)(()=>{de()},[]),(0,a.useEffect)(()=>{ue()},[t,$,se]);const de=async()=>{await Promise.all([xe(),he(),Ae()])},xe=async()=>{try{const{data:e,error:s}=await D.N.from("products").select("*").order("created_at",{ascending:!1});s||Q(e||[])}finally{ae(e=>(0,r.A)((0,r.A)({},e),{},{products:!1}))}},he=async()=>{try{const{data:e,error:s}=await D.N.from("orders").select("*, order_items (quantity, price_at_time, products (name))").order("created_at",{ascending:!1}).limit(50);s||ee(e||[])}finally{ae(e=>(0,r.A)((0,r.A)({},e),{},{orders:!1}))}},Ae=async()=>{try{const{data:e,error:s}=await D.N.from("profiles").select("*").order("created_at",{ascending:!1}).limit(50);s||te(e||[])}finally{ae(e=>(0,r.A)((0,r.A)({},e),{},{users:!1}))}},ue=()=>{const e=$.reduce((e,s)=>e+Number(s.total_amount||0),0);ie({totalProducts:t.length,totalOrders:$.length,totalUsers:se.length,totalRevenue:e,pendingOrders:$.filter(e=>"pending"===e.status).length,lowStockProducts:t.filter(e=>e.stock<10).length})},me={pageWrapper:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",pb:8,pt:4,overflowX:"hidden"},glassPanel:{background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.07)",transition:"all 0.4s ease"},card3D:{transformStyle:"preserve-3d",perspective:"1000px",transition:"transform 0.4s ease, box-shadow 0.4s ease",cursor:"pointer","&:hover":{transform:"translateY(-10px) rotateX(5deg)",boxShadow:"0 20px 40px -10px rgba(0,0,0,0.15)",zIndex:10}},gradientText:{background:"linear-gradient(45deg, #111 30%, #555 90%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:900},tableRow:{transition:"all 0.2s ease","&:hover":{background:"rgba(255,255,255,0.9) !important",transform:"scale(1.01)",boxShadow:"0 4px 15px rgba(0,0,0,0.05)",zIndex:2,position:"relative"}}},je=t.reduce((e,s)=>{const t=s.category||"Other";return e[t]=(e[t]||0)+1,e},{}),pe=Object.entries(je).map(e=>{let[s,t]=e;return{name:s,value:t}}),ge=["#000000","#333333","#666666","#999999","#AAAAAA","#CCCCCC"],be=e=>{let{title:s,value:t,icon:a,color:d,subtext:x,delay:h}=e;return(0,Z.jsx)(n.A,{sx:(0,r.A)((0,r.A)((0,r.A)({},me.glassPanel),me.card3D),{},{height:"100%",overflow:"hidden",animation:"slideUp 0.6s ease-out forwards ".concat(h,"s"),opacity:0,transform:"translateY(20px)"}),children:(0,Z.jsxs)(i.A,{sx:{position:"relative",p:3},children:[(0,Z.jsx)(o.A,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,background:d,borderRadius:"50%",opacity:.1}}),(0,Z.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,Z.jsx)(o.A,{sx:{p:1.5,borderRadius:"16px",background:"linear-gradient(135deg, ".concat(d,"20 0%, ").concat(d,"10 100%)"),color:d},children:a}),(0,Z.jsx)(l.A,{icon:(0,Z.jsx)(R.A,{style:{width:14}}),label:"12%",size:"small",sx:{bgcolor:"rgba(34, 197, 94, 0.1)",color:"#22C55E",fontWeight:700}})]}),(0,Z.jsx)(c.A,{variant:"h3",sx:{fontWeight:800,color:"#111",mb:.5},children:t}),(0,Z.jsx)(c.A,{variant:"body2",sx:{color:"#666",fontWeight:600,textTransform:"uppercase",letterSpacing:"1px"},children:s}),(0,Z.jsx)(c.A,{variant:"caption",sx:{color:"#999",mt:1,display:"block"},children:x})]})})};return(0,Z.jsxs)(o.A,{sx:me.pageWrapper,children:[(0,Z.jsx)("style",{children:"\n        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }\n      "}),(0,Z.jsxs)(d.A,{maxWidth:"xl",children:[(0,Z.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:5},children:[(0,Z.jsxs)(o.A,{children:[(0,Z.jsx)(c.A,{variant:"h2",sx:(0,r.A)((0,r.A)({},me.gradientText),{},{fontSize:{xs:"2rem",md:"3rem"}}),children:"Admin Dashboard"}),(0,Z.jsx)(c.A,{variant:"body1",sx:{color:"#666",mt:1},children:"Welcome back, Commander."})]}),(0,Z.jsx)(x.A,{startIcon:(0,Z.jsx)(N.A,{}),sx:{color:"black",borderColor:"black",borderWidth:2,borderRadius:"30px",px:3,fontWeight:700},variant:"outlined",children:"View Store"})]}),(0,Z.jsxs)(h.A,{value:e,onChange:(e,t)=>s(t),sx:{mb:4,"& .MuiTabs-indicator":{bgcolor:"black",height:4,borderRadius:2},"& .Mui-selected":{color:"black !important"}},children:[(0,Z.jsx)(A.A,{icon:(0,Z.jsx)(O.A,{}),iconPosition:"start",label:"Overview"}),(0,Z.jsx)(A.A,{icon:(0,Z.jsx)(T.A,{}),iconPosition:"start",label:"Products"}),(0,Z.jsx)(A.A,{icon:(0,Z.jsx)(F.A,{}),iconPosition:"start",label:"Orders"}),(0,Z.jsx)(A.A,{icon:(0,Z.jsx)(E.A,{}),iconPosition:"start",label:"Customers"})]}),re.products||re.orders||re.users?(0,Z.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:(0,Z.jsx)(u.A,{sx:{color:"black"}})}):(0,Z.jsxs)(Z.Fragment,{children:[0===e&&(0,Z.jsxs)(o.A,{children:[(0,Z.jsxs)(m.A,{container:!0,spacing:4,sx:{mb:6},children:[(0,Z.jsx)(m.A,{item:!0,xs:12,sm:6,md:3,children:(0,Z.jsx)(be,{title:"Revenue",value:"\u20b9".concat((ne.totalRevenue/1e3).toFixed(1),"k"),icon:(0,Z.jsx)(W.A,{fontSize:"large"}),color:"#000000",subtext:"Total earnings",delay:.1})}),(0,Z.jsx)(m.A,{item:!0,xs:12,sm:6,md:3,children:(0,Z.jsx)(be,{title:"Orders",value:ne.totalOrders,icon:(0,Z.jsx)(F.A,{fontSize:"large"}),color:"#3B82F6",subtext:"".concat(ne.pendingOrders," pending"),delay:.2})}),(0,Z.jsx)(m.A,{item:!0,xs:12,sm:6,md:3,children:(0,Z.jsx)(be,{title:"Products",value:ne.totalProducts,icon:(0,Z.jsx)(z.A,{fontSize:"large"}),color:"#8B7355",subtext:"".concat(ne.lowStockProducts," low stock"),delay:.3})}),(0,Z.jsx)(m.A,{item:!0,xs:12,sm:6,md:3,children:(0,Z.jsx)(be,{title:"Users",value:ne.totalUsers,icon:(0,Z.jsx)(E.A,{fontSize:"large"}),color:"#FF69B4",subtext:"Active customers",delay:.4})})]}),(0,Z.jsxs)(m.A,{container:!0,spacing:4,children:[(0,Z.jsx)(m.A,{item:!0,xs:12,md:8,children:(0,Z.jsxs)(j.A,{sx:(0,r.A)((0,r.A)({},me.glassPanel),{},{p:4,height:400}),children:[(0,Z.jsx)(c.A,{variant:"h6",sx:{fontWeight:800,mb:4},children:"REVENUE ANALYTICS"}),(0,Z.jsx)(B.u,{width:"100%",height:"85%",children:(0,Z.jsxs)(G.E,{data:[{name:"Jan",sales:4e3},{name:"Feb",sales:3e3},{name:"Mar",sales:5e3},{name:"Apr",sales:4500},{name:"May",sales:6e3},{name:"Jun",sales:5500}],children:[(0,Z.jsx)(V.d,{strokeDasharray:"3 3",vertical:!1}),(0,Z.jsx)(H.W,{dataKey:"name"}),(0,Z.jsx)(J.h,{}),(0,Z.jsx)(M.m,{}),(0,Z.jsx)(X.yP,{dataKey:"sales",fill:"#000000",radius:[6,6,0,0]})]})})]})}),(0,Z.jsx)(m.A,{item:!0,xs:12,md:4,children:(0,Z.jsxs)(j.A,{sx:(0,r.A)((0,r.A)({},me.glassPanel),{},{p:4,height:400}),children:[(0,Z.jsx)(c.A,{variant:"h6",sx:{fontWeight:800,mb:2},children:"INVENTORY MIX"}),(0,Z.jsx)(B.u,{width:"100%",height:"90%",children:(0,Z.jsxs)(L.r,{children:[(0,Z.jsx)(q.Fq,{data:pe,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:pe.map((e,s)=>(0,Z.jsx)(K.f,{fill:ge[s%ge.length]},"cell-".concat(s)))}),(0,Z.jsx)(M.m,{}),(0,Z.jsx)(Y.s,{})]})})]})})]})]}),1===e&&(0,Z.jsxs)(o.A,{children:[(0,Z.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mb:4},children:[(0,Z.jsx)(c.A,{variant:"h5",fontWeight:800,children:"Product Inventory"}),(0,Z.jsx)(x.A,{variant:"contained",startIcon:(0,Z.jsx)(S.A,{}),onClick:()=>ce("/admin/products/new"),sx:{bgcolor:"black",borderRadius:"50px"},children:"Add Product"})]}),(0,Z.jsx)(p.A,{component:j.A,sx:(0,r.A)((0,r.A)({},me.glassPanel),{},{boxShadow:"none"}),children:(0,Z.jsxs)(g.A,{children:[(0,Z.jsx)(b.A,{children:(0,Z.jsxs)(f.A,{children:[(0,Z.jsx)(y.A,{children:"PRODUCT"}),(0,Z.jsx)(y.A,{children:"CATEGORY"}),(0,Z.jsx)(y.A,{children:"PRICE"}),(0,Z.jsx)(y.A,{children:"STOCK"}),(0,Z.jsx)(y.A,{children:"ACTIONS"})]})}),(0,Z.jsx)(v.A,{children:t.map(e=>(0,Z.jsxs)(f.A,{sx:me.tableRow,children:[(0,Z.jsx)(y.A,{children:(0,Z.jsx)(c.A,{fontWeight:700,children:e.name})}),(0,Z.jsx)(y.A,{children:(0,Z.jsx)(l.A,{label:e.category,size:"small"})}),(0,Z.jsxs)(y.A,{fontWeight:600,children:["\u20b9",e.price]}),(0,Z.jsxs)(y.A,{children:[e.stock," units"]}),(0,Z.jsxs)(y.A,{children:[(0,Z.jsx)(k.A,{size:"small",onClick:()=>ce("/admin/products/edit/".concat(e.id)),children:(0,Z.jsx)(_.A,{fontSize:"small"})}),(0,Z.jsx)(k.A,{size:"small",color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{const{error:s}=await D.N.from("products").delete().eq("id",e);if(s)throw s;Q(s=>s.filter(s=>s.id!==e)),le({open:!0,message:"Product deleted successfully!",severity:"success"})}catch(s){console.error("Delete failed:",s),le({open:!0,message:"Failed to delete. Product likely in an order.",severity:"error"})}})(e.id),children:(0,Z.jsx)(I.A,{fontSize:"small"})})]})]},e.id))})]})})]}),2===e&&(0,Z.jsx)(o.A,{sx:(0,r.A)((0,r.A)({},me.glassPanel),{},{p:4}),children:(0,Z.jsx)(c.A,{children:'Please navigate to the "Orders" tab in the sidebar or top menu to manage full orders.'})}),3===e&&(0,Z.jsxs)(o.A,{sx:(0,r.A)((0,r.A)({},me.glassPanel),{},{p:4}),children:[(0,Z.jsx)(c.A,{variant:"h5",fontWeight:800,mb:3,children:"Registered Customers"}),se.map(e=>{var s;return(0,Z.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,p:2,bgcolor:"rgba(255,255,255,0.5)",borderRadius:"12px"},children:[(0,Z.jsx)(w.A,{src:e.avatar_url,children:null===(s=e.full_name)||void 0===s?void 0:s[0]}),(0,Z.jsxs)(o.A,{children:[(0,Z.jsx)(c.A,{fontWeight:700,children:e.full_name||"User"}),(0,Z.jsx)(c.A,{variant:"caption",children:e.email})]})]},e.id)})]})]})]}),(0,Z.jsx)(C.A,{open:oe.open,autoHideDuration:4e3,onClose:()=>le((0,r.A)((0,r.A)({},oe),{},{open:!1})),children:(0,Z.jsx)(P.A,{severity:oe.severity,children:oe.message})})]})}}}]);
//# sourceMappingURL=143.e050b8cf.chunk.js.map