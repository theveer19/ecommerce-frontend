"use strict";(self.webpackChunkmy_ecommerce_frontend=self.webpackChunkmy_ecommerce_frontend||[]).push([[185],{57185(e,r,s){s.r(r),s.d(r,{default:()=>de});var n=s(89379),o=s(65043),i=s(73216),t=s(72720),d=s(53969),l=s(80172),a=s(55895),c=s(12097),x=s(42579),u=s(53089),h=s(91244),A=s(16128),p=s(83759),g=s(28259),v=s(87443),j=s(10756),m=s(86172),b=s(81341),f=s(34375),y=s(17873),_=s(94799),w=s(95315),k=s(42455),S=s(79801),C=s(66185),B=s(94527),F=s(38517),W=s(81911),I=s(78776),E=s(10256),O=s(3353),D=s(30183),P=s(47471),R=s(24343),N=s(85877),T=s(70916),U=s(56803),q=s(58315),z=s(53974),L=s(63898),M=s(23683),H=s(10871),G=s(93201),K=s(37305),Q=s(61773),Z=s(4573),J=s(66245),V=s(74856),X=s(88231),Y=s(46718),$=s(90160),ee=s(23241),re=s(28330),se=s(91921),ne=s(69302),oe=s(6691),ie=s(79432),te=s(70579);function de(){var e,r,s,de,le,ae,ce,xe,ue,he,Ae,pe,ge,ve,je,me,be,fe,ye,_e,we,ke,Se,Ce,Be,Fe,We,Ie,Ee;const{id:Oe}=(0,i.g)(),De=(0,i.Zp)(),[Pe,Re]=(0,o.useState)(null),[Ne,Te]=(0,o.useState)(!0),[Ue,qe]=(0,o.useState)(!1),[ze,Le]=(0,o.useState)({open:!1,message:"",severity:"success"}),[Me,He]=(0,o.useState)(!1),[Ge,Ke]=(0,o.useState)(""),[Qe,Ze]=(0,o.useState)(""),[Je,Ve]=(0,o.useState)("");(0,o.useEffect)(()=>{Oe&&Xe()},[Oe]);const Xe=async()=>{try{Te(!0);const{data:e,error:r}=await t.N.from("orders").select("\n          *,\n          order_items (\n            id,\n            quantity,\n            price_at_time,\n            product_id,\n            products (\n              id,\n              name,\n              description,\n              image_url,\n              category,\n              brand,\n              sku\n            )\n          ),\n          users (\n            id,\n            email,\n            full_name,\n            phone,\n            avatar_url,\n            created_at\n          )\n        ").eq("id",Oe).single();if(r)throw r;Re(e),e.tracking_number&&Ve(e.tracking_number),e.admin_notes&&Ze(e.admin_notes)}catch(e){console.error("Error fetching order details:",e),er("Error loading order details","error")}finally{Te(!1)}},Ye=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return"#F59E0B";case"processing":return"#3B82F6";case"shipped":return"#8B5CF6";case"delivered":return"#22C55E";case"cancelled":return"#EF4444";default:return"#6B7280"}},$e=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"paid":return"#22C55E";case"pending":return"#F59E0B";case"failed":return"#EF4444";default:return"#6B7280"}},er=function(e){Le({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})},rr=()=>{const e=[];return null!==Pe&&void 0!==Pe&&Pe.created_at&&e.push({status:"Order Placed",date:Pe.created_at,icon:(0,te.jsx)(oe.A,{}),color:"#22C55E"}),null!==Pe&&void 0!==Pe&&Pe.processing_at&&e.push({status:"Processing Started",date:Pe.processing_at,icon:(0,te.jsx)(J.A,{}),color:"#3B82F6"}),null!==Pe&&void 0!==Pe&&Pe.shipped_at&&e.push({status:"Shipped",date:Pe.shipped_at,icon:(0,te.jsx)(V.A,{}),color:"#8B5CF6"}),null!==Pe&&void 0!==Pe&&Pe.delivered_at&&e.push({status:"Delivered",date:Pe.delivered_at,icon:(0,te.jsx)(G.A,{}),color:"#22C55E"}),null!==Pe&&void 0!==Pe&&Pe.cancelled_at&&e.push({status:"Cancelled",date:Pe.cancelled_at,icon:(0,te.jsx)(M.A,{}),color:"#EF4444"}),e.sort((e,r)=>new Date(e.date)-new Date(r.date))};return Ne?(0,te.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",background:"#F5F1E8"},children:(0,te.jsx)(l.A,{sx:{color:"#8B7355"}})}):Pe?(0,te.jsxs)(d.A,{sx:{p:3,background:"#F5F1E8",minHeight:"100vh"},children:[(0,te.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:4},children:[(0,te.jsxs)(d.A,{children:[(0,te.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,te.jsx)(x.A,{onClick:()=>De("/admin/orders"),sx:{color:"#8B7355","&:hover":{background:"rgba(139, 115, 85, 0.1)"}},children:(0,te.jsx)(q.A,{})}),(0,te.jsx)(a.A,{variant:"h4",sx:{fontWeight:800,color:"#4A4A3A"},children:"Order Details"})]}),(0,te.jsx)(a.A,{variant:"body1",sx:{color:"#6B6B5A",ml:6},children:Pe.order_number||"ORD-".concat(Pe.id.slice(-8).toUpperCase())})]}),(0,te.jsxs)(d.A,{sx:{display:"flex",gap:2},children:[(0,te.jsx)(c.A,{variant:"outlined",startIcon:(0,te.jsx)(re.A,{}),onClick:()=>{window.print()},sx:{borderColor:"#6B7280",color:"#6B7280","&:hover":{borderColor:"#4B5563",background:"rgba(107, 114, 128, 0.05)"}},children:"Print"}),(0,te.jsx)(c.A,{variant:"outlined",startIcon:(0,te.jsx)(K.A,{}),onClick:()=>{var e,r;const s="\nInvoice\nOrder ID: ".concat((null===Pe||void 0===Pe?void 0:Pe.order_number)||(null===Pe||void 0===Pe?void 0:Pe.id),"\nDate: ").concat(null!==Pe&&void 0!==Pe&&Pe.created_at?(0,ie.GP)(new Date(Pe.created_at),"PPP"):"N/A","\nCustomer: ").concat((null===Pe||void 0===Pe||null===(e=Pe.shipping_address)||void 0===e?void 0:e.name)||(null===Pe||void 0===Pe||null===(r=Pe.users)||void 0===r?void 0:r.full_name)||"N/A","\nStatus: ").concat(null===Pe||void 0===Pe?void 0:Pe.status,"\nPayment: ").concat(null===Pe||void 0===Pe?void 0:Pe.payment_status,"\nTotal: \u20b9").concat((null===Pe||void 0===Pe?void 0:Pe.total_amount)||"0.00","\n    "),n=new Blob([s],{type:"text/plain"}),o=window.URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download="invoice_".concat((null===Pe||void 0===Pe?void 0:Pe.order_number)||(null===Pe||void 0===Pe?void 0:Pe.id),".txt"),i.click(),window.URL.revokeObjectURL(o),er("Invoice exported successfully","success")},sx:{borderColor:"#8B7355",color:"#8B7355","&:hover":{borderColor:"#755F47",background:"rgba(139, 115, 85, 0.05)"}},children:"Export"}),(0,te.jsx)(c.A,{variant:"contained",startIcon:(0,te.jsx)(ne.A,{}),onClick:Xe,disabled:Ue,sx:{background:"#8B7355",color:"white","&:hover":{background:"#755F47"},"&.Mui-disabled":{background:"#C4B5A0"}},children:"Refresh"})]})]}),(0,te.jsxs)(u.A,{container:!0,spacing:3,children:[(0,te.jsxs)(u.A,{item:!0,xs:12,lg:8,children:[(0,te.jsx)(h.A,{sx:{mb:3,borderRadius:3,background:"white",boxShadow:"0 8px 24px rgba(0,0,0,0.05)",border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(A.A,{children:[(0,te.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[(0,te.jsxs)(d.A,{children:[(0,te.jsx)(a.A,{variant:"h6",sx:{fontWeight:700,color:"#4A4A3A",mb:1},children:"Order Status"}),(0,te.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,te.jsx)(p.A,{label:null===(e=Pe.status)||void 0===e?void 0:e.toUpperCase(),sx:{background:"".concat(Ye(Pe.status),"15"),color:Ye(Pe.status),fontWeight:700,fontSize:"0.875rem",py:1}}),(0,te.jsx)(p.A,{label:null===(r=Pe.payment_status)||void 0===r?void 0:r.toUpperCase(),sx:{background:"".concat($e(Pe.payment_status),"15"),color:$e(Pe.payment_status),fontWeight:700,fontSize:"0.875rem",py:1}})]})]}),(0,te.jsxs)(d.A,{sx:{display:"flex",gap:1},children:[(0,te.jsx)(c.A,{variant:"outlined",startIcon:(0,te.jsx)(Q.A,{}),onClick:()=>{Ke(Pe.status),He(!0)},sx:{borderColor:"#8B7355",color:"#8B7355","&:hover":{borderColor:"#755F47",background:"rgba(139, 115, 85, 0.05)"}},children:"Update Status"}),"cancelled"!==Pe.status&&"delivered"!==Pe.status&&(0,te.jsx)(c.A,{variant:"outlined",color:"error",startIcon:(0,te.jsx)(M.A,{}),onClick:async()=>{if(window.confirm("Are you sure you want to cancel this order? This action cannot be undone."))try{qe(!0);const{error:e}=await t.N.from("orders").update({status:"cancelled",updated_at:(new Date).toISOString(),cancelled_at:(new Date).toISOString()}).eq("id",Oe);if(e)throw e;Re(e=>(0,n.A)((0,n.A)({},e),{},{status:"cancelled",cancelled_at:(new Date).toISOString()})),er("Order cancelled successfully","success")}catch(e){console.error("Error cancelling order:",e),er("Error cancelling order","error")}finally{qe(!1)}},disabled:Ue,sx:{borderColor:"#EF4444",color:"#EF4444","&:hover":{borderColor:"#DC2626",background:"rgba(239, 68, 68, 0.05)"}},children:"Cancel Order"})]})]}),(0,te.jsx)(a.A,{variant:"subtitle2",sx:{color:"#6B6B5A",mb:2,fontWeight:600},children:"Order Timeline"}),(0,te.jsx)(d.A,{sx:{pl:2},children:rr().map((e,r)=>(0,te.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,pb:2,borderBottom:r<rr().length-1?"1px solid #E5E7EB":"none"},children:[(0,te.jsx)(d.A,{sx:{width:32,height:32,borderRadius:"50%",background:"".concat(e.color,"15"),display:"flex",alignItems:"center",justifyContent:"center",color:e.color},children:e.icon}),(0,te.jsxs)(d.A,{sx:{flex:1},children:[(0,te.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#4A4A3A"},children:e.status}),(0,te.jsx)(a.A,{variant:"caption",sx:{color:"#6B7280"},children:(0,ie.GP)(new Date(e.date),"PPpp")})]})]},r))})]})}),(0,te.jsx)(h.A,{sx:{mb:3,borderRadius:3,background:"white",boxShadow:"0 8px 24px rgba(0,0,0,0.05)",border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(A.A,{children:[(0,te.jsxs)(a.A,{variant:"h6",sx:{fontWeight:700,color:"#4A4A3A",mb:3},children:[(0,te.jsx)(oe.A,{sx:{mr:1,verticalAlign:"middle"}}),"Order Items (",(null===(s=Pe.order_items)||void 0===s?void 0:s.length)||0,")"]}),(0,te.jsx)(g.A,{children:(0,te.jsxs)(v.A,{children:[(0,te.jsx)(j.A,{sx:{background:"#F5F1E8"},children:(0,te.jsxs)(m.A,{children:[(0,te.jsx)(b.A,{sx:{fontWeight:700,color:"#4A4A3A"},children:"Product"}),(0,te.jsx)(b.A,{sx:{fontWeight:700,color:"#4A4A3A"},children:"Price"}),(0,te.jsx)(b.A,{sx:{fontWeight:700,color:"#4A4A3A"},children:"Quantity"}),(0,te.jsx)(b.A,{sx:{fontWeight:700,color:"#4A4A3A"},align:"right",children:"Total"})]})}),(0,te.jsx)(f.A,{children:null===(de=Pe.order_items)||void 0===de?void 0:de.map((e,r)=>{var s,n,o,i,t,l,c,x;return(0,te.jsxs)(m.A,{children:[(0,te.jsx)(b.A,{children:(0,te.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,te.jsx)(y.A,{src:null===(s=e.products)||void 0===s?void 0:s.image_url,alt:null===(n=e.products)||void 0===n?void 0:n.name,sx:{width:56,height:56,borderRadius:2},children:null===(o=e.products)||void 0===o||null===(i=o.name)||void 0===i?void 0:i.charAt(0)}),(0,te.jsxs)(d.A,{children:[(0,te.jsx)(a.A,{sx:{fontWeight:600,color:"#2A2A2A"},children:null===(t=e.products)||void 0===t?void 0:t.name}),(0,te.jsxs)(a.A,{variant:"body2",sx:{color:"#6B7280"},children:["SKU: ",(null===(l=e.products)||void 0===l?void 0:l.sku)||"N/A"]}),(0,te.jsx)(a.A,{variant:"caption",sx:{color:"#8B7355"},children:null===(c=e.products)||void 0===c?void 0:c.category})]})]})}),(0,te.jsx)(b.A,{children:(0,te.jsxs)(a.A,{sx:{fontWeight:600,color:"#4A4A3A"},children:["\u20b9",null===(x=e.price_at_time)||void 0===x?void 0:x.toFixed(2)]})}),(0,te.jsx)(b.A,{children:(0,te.jsx)(a.A,{sx:{color:"#4A4A3A"},children:e.quantity})}),(0,te.jsx)(b.A,{align:"right",children:(0,te.jsxs)(a.A,{sx:{fontWeight:700,color:"#8B7355"},children:["\u20b9",(e.quantity*e.price_at_time).toFixed(2)]})})]},e.id)})})]})})]})}),Pe.customer_notes&&(0,te.jsx)(h.A,{sx:{borderRadius:3,background:"white",boxShadow:"0 8px 24px rgba(0,0,0,0.05)",border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(A.A,{children:[(0,te.jsx)(a.A,{variant:"h6",sx:{fontWeight:700,color:"#4A4A3A",mb:2},children:"Customer Notes"}),(0,te.jsx)(_.A,{sx:{p:2,background:"#F5F1E8",borderRadius:2,border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(a.A,{sx:{color:"#4A4A3A",fontStyle:"italic"},children:['"',Pe.customer_notes,'"']})})]})})]}),(0,te.jsxs)(u.A,{item:!0,xs:12,lg:4,children:[(0,te.jsx)(h.A,{sx:{mb:3,borderRadius:3,background:"white",boxShadow:"0 8px 24px rgba(0,0,0,0.05)",border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(A.A,{children:[(0,te.jsxs)(a.A,{variant:"h6",sx:{fontWeight:700,color:"#4A4A3A",mb:3},children:[(0,te.jsx)($.A,{sx:{mr:1,verticalAlign:"middle"}}),"Customer Information"]}),(0,te.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[(0,te.jsx)(y.A,{src:null===(le=Pe.users)||void 0===le?void 0:le.avatar_url,sx:{width:56,height:56},children:(null===(ae=Pe.users)||void 0===ae||null===(ce=ae.full_name)||void 0===ce?void 0:ce.charAt(0))||(null===(xe=Pe.shipping_address)||void 0===xe||null===(ue=xe.name)||void 0===ue?void 0:ue.charAt(0))||"C"}),(0,te.jsxs)(d.A,{children:[(0,te.jsx)(a.A,{sx:{fontWeight:700,color:"#2A2A2A"},children:(null===(he=Pe.shipping_address)||void 0===he?void 0:he.name)||(null===(Ae=Pe.users)||void 0===Ae?void 0:Ae.full_name)||"Customer"}),(0,te.jsx)(a.A,{variant:"body2",sx:{color:"#6B7280"},children:(null===(pe=Pe.users)||void 0===pe?void 0:pe.email)||(null===(ge=Pe.shipping_address)||void 0===ge?void 0:ge.email)})]})]}),(0,te.jsxs)(w.A,{dense:!0,children:[(null===(ve=Pe.shipping_address)||void 0===ve?void 0:ve.phone)&&(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(S.A,{sx:{minWidth:40},children:(0,te.jsx)(ee.A,{sx:{color:"#8B7355"}})}),(0,te.jsx)(C.A,{primary:"Phone",secondary:Pe.shipping_address.phone,secondaryTypographyProps:{color:"#4A4A3A"}})]}),(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(S.A,{sx:{minWidth:40},children:(0,te.jsx)(Z.A,{sx:{color:"#8B7355"}})}),(0,te.jsx)(C.A,{primary:"Email",secondary:(null===(je=Pe.users)||void 0===je?void 0:je.email)||(null===(me=Pe.shipping_address)||void 0===me?void 0:me.email)||"N/A",secondaryTypographyProps:{color:"#4A4A3A"}})]}),(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(S.A,{sx:{minWidth:40},children:(0,te.jsx)(L.A,{sx:{color:"#8B7355"}})}),(0,te.jsx)(C.A,{primary:"Customer Since",secondary:null!==(be=Pe.users)&&void 0!==be&&be.created_at?(0,ie.GP)(new Date(Pe.users.created_at),"PP"):"N/A",secondaryTypographyProps:{color:"#4A4A3A"}})]})]}),(0,te.jsxs)(d.A,{sx:{display:"flex",gap:1,mt:3},children:[(0,te.jsx)(c.A,{variant:"outlined",startIcon:(0,te.jsx)(H.A,{}),fullWidth:!0,sx:{borderColor:"#8B7355",color:"#8B7355","&:hover":{borderColor:"#755F47",background:"rgba(139, 115, 85, 0.05)"}},children:"Message"}),(0,te.jsx)(c.A,{variant:"contained",startIcon:(0,te.jsx)(Y.A,{}),fullWidth:!0,sx:{background:"#8B7355",color:"white","&:hover":{background:"#755F47"}},children:"Email"})]})]})}),(0,te.jsx)(h.A,{sx:{mb:3,borderRadius:3,background:"white",boxShadow:"0 8px 24px rgba(0,0,0,0.05)",border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(A.A,{children:[(0,te.jsxs)(a.A,{variant:"h6",sx:{fontWeight:700,color:"#4A4A3A",mb:3},children:[(0,te.jsx)(X.A,{sx:{mr:1,verticalAlign:"middle"}}),"Shipping Information"]}),(0,te.jsxs)(d.A,{sx:{background:"#F5F1E8",borderRadius:2,p:2,mb:2},children:[(0,te.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#4A4A3A",mb:1},children:"Shipping Address"}),(0,te.jsxs)(a.A,{sx:{color:"#4A4A3A",whiteSpace:"pre-line"},children:[(null===(fe=Pe.shipping_address)||void 0===fe?void 0:fe.name)||"Customer","\n",null===(ye=Pe.shipping_address)||void 0===ye?void 0:ye.address,"\n",null===(_e=Pe.shipping_address)||void 0===_e?void 0:_e.city,", ",null===(we=Pe.shipping_address)||void 0===we?void 0:we.state,"\n",null===(ke=Pe.shipping_address)||void 0===ke?void 0:ke.pincode,"\n",(null===(Se=Pe.shipping_address)||void 0===Se?void 0:Se.country)||"India"]})]}),(0,te.jsxs)(d.A,{sx:{background:"#F5F1E8",borderRadius:2,p:2},children:[(0,te.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#4A4A3A",mb:1},children:"Shipping Method"}),(0,te.jsx)(a.A,{sx:{color:"#4A4A3A"},children:Pe.shipping_method||"Standard Shipping"}),Pe.tracking_number&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#4A4A3A",mt:2,mb:1},children:"Tracking Number"}),(0,te.jsx)(a.A,{sx:{fontFamily:"monospace",color:"#8B7355",background:"white",p:1,borderRadius:1,border:"1px solid rgba(139, 115, 85, 0.2)"},children:Pe.tracking_number})]})]})]})}),(0,te.jsx)(h.A,{sx:{borderRadius:3,background:"white",boxShadow:"0 8px 24px rgba(0,0,0,0.05)",border:"1px solid rgba(139, 115, 85, 0.1)"},children:(0,te.jsxs)(A.A,{children:[(0,te.jsxs)(a.A,{variant:"h6",sx:{fontWeight:700,color:"#4A4A3A",mb:3},children:[(0,te.jsx)(se.A,{sx:{mr:1,verticalAlign:"middle"}}),"Order Summary"]}),(0,te.jsxs)(w.A,{dense:!0,children:[(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(C.A,{primary:"Subtotal"}),(0,te.jsxs)(a.A,{sx:{fontWeight:600},children:["\u20b9",(null===(Ce=Pe.subtotal)||void 0===Ce?void 0:Ce.toFixed(2))||"0.00"]})]}),(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(C.A,{primary:"Shipping"}),(0,te.jsxs)(a.A,{sx:{fontWeight:600},children:["\u20b9",(null===(Be=Pe.shipping_cost)||void 0===Be?void 0:Be.toFixed(2))||"0.00"]})]}),(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(C.A,{primary:"Tax"}),(0,te.jsxs)(a.A,{sx:{fontWeight:600},children:["\u20b9",(null===(Fe=Pe.tax_amount)||void 0===Fe?void 0:Fe.toFixed(2))||"0.00"]})]}),(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(C.A,{primary:"Discount"}),(0,te.jsxs)(a.A,{sx:{fontWeight:600,color:"#22C55E"},children:["-\u20b9",(null===(We=Pe.discount_amount)||void 0===We?void 0:We.toFixed(2))||"0.00"]})]}),(0,te.jsx)(B.A,{sx:{my:1}}),(0,te.jsxs)(k.Ay,{sx:{px:0},children:[(0,te.jsx)(C.A,{primary:(0,te.jsx)(a.A,{sx:{fontWeight:700,fontSize:"1.1rem"},children:"Total"})}),(0,te.jsxs)(a.A,{sx:{fontWeight:800,fontSize:"1.2rem",color:"#8B7355"},children:["\u20b9",(null===(Ie=Pe.total_amount)||void 0===Ie?void 0:Ie.toFixed(2))||"0.00"]})]})]}),(0,te.jsxs)(d.A,{sx:{mt:3},children:[(0,te.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#6B6B5A",mb:1},children:"Payment Method"}),(0,te.jsx)(p.A,{label:(null===(Ee=Pe.payment_method)||void 0===Ee?void 0:Ee.toUpperCase())||"ONLINE",sx:{background:"#8B735515",color:"#8B7355",fontWeight:600}})]}),(0,te.jsxs)(d.A,{sx:{mt:3},children:[(0,te.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#6B6B5A",mb:1},children:"Transaction ID"}),(0,te.jsx)(a.A,{sx:{fontFamily:"monospace",fontSize:"0.875rem",color:"#6B7280",wordBreak:"break-all"},children:Pe.transaction_id||"N/A"})]}),"paid"===Pe.payment_status&&"refunded"!==Pe.status&&(0,te.jsx)(c.A,{variant:"outlined",color:"error",startIcon:(0,te.jsx)(z.A,{}),onClick:async()=>{if(window.confirm("Initiate refund for this order?"))try{const{error:e}=await t.N.from("orders").update({payment_status:"refunded",status:"cancelled",updated_at:(new Date).toISOString(),refunded_at:(new Date).toISOString()}).eq("id",Oe);if(e)throw e;Re(e=>(0,n.A)((0,n.A)({},e),{},{payment_status:"refunded",status:"cancelled",refunded_at:(new Date).toISOString()})),er("Refund initiated successfully","success")}catch(e){console.error("Error processing refund:",e),er("Error processing refund","error")}},fullWidth:!0,sx:{mt:3},children:"Initiate Refund"})]})})]})]}),(0,te.jsxs)(F.A,{open:Me,onClose:()=>He(!1),maxWidth:"sm",fullWidth:!0,children:[(0,te.jsx)(W.A,{sx:{background:"#F5F1E8",color:"#4A4A3A",fontWeight:700},children:"Update Order Status"}),(0,te.jsxs)(I.A,{sx:{pt:3},children:[(0,te.jsxs)(E.A,{fullWidth:!0,sx:{mb:3},children:[(0,te.jsx)(O.A,{children:"New Status"}),(0,te.jsxs)(D.A,{value:Ge,onChange:e=>Ke(e.target.value),label:"New Status",children:[(0,te.jsx)(P.A,{value:"pending",children:"Pending"}),(0,te.jsx)(P.A,{value:"processing",children:"Processing"}),(0,te.jsx)(P.A,{value:"shipped",children:"Shipped"}),(0,te.jsx)(P.A,{value:"delivered",children:"Delivered"}),(0,te.jsx)(P.A,{value:"cancelled",children:"Cancelled"})]})]}),(0,te.jsx)(R.A,{label:"Tracking Number (if shipping)",fullWidth:!0,value:Je,onChange:e=>Ve(e.target.value),placeholder:"Enter tracking number",sx:{mb:3}}),(0,te.jsx)(R.A,{label:"Admin Notes",fullWidth:!0,multiline:!0,rows:3,value:Qe,onChange:e=>Ze(e.target.value),placeholder:"Add any notes about this order..."})]}),(0,te.jsxs)(N.A,{sx:{p:3,background:"#F5F1E8"},children:[(0,te.jsx)(c.A,{onClick:()=>He(!1),sx:{color:"#6B6B5A"},children:"Cancel"}),(0,te.jsx)(c.A,{variant:"contained",onClick:async()=>{if(Ge)try{qe(!0);const e={status:Ge,updated_at:(new Date).toISOString(),admin_notes:Qe||null,tracking_number:Je||null};"processing"===Ge?e.processing_at=(new Date).toISOString():"shipped"===Ge?e.shipped_at=(new Date).toISOString():"delivered"===Ge&&(e.delivered_at=(new Date).toISOString());const{error:r}=await t.N.from("orders").update(e).eq("id",Oe);if(r)throw r;Re(r=>(0,n.A)((0,n.A)({},r),e)),er("Order status updated to ".concat(Ge),"success"),He(!1),Ke("")}catch(e){console.error("Error updating order status:",e),er("Error updating order status","error")}finally{qe(!1)}},disabled:!Ge||Ue,sx:{background:"#8B7355",color:"white","&:hover":{background:"#755F47"},"&.Mui-disabled":{background:"#C4B5A0"}},children:Ue?(0,te.jsx)(l.A,{size:24,sx:{color:"white"}}):"Update Status"})]})]}),(0,te.jsx)(T.A,{open:ze.open,autoHideDuration:6e3,onClose:()=>Le((0,n.A)((0,n.A)({},ze),{},{open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,te.jsx)(U.A,{onClose:()=>Le((0,n.A)((0,n.A)({},ze),{},{open:!1})),severity:ze.severity,sx:{background:"white",color:"#4A4A3A",boxShadow:"0 8px 24px rgba(0,0,0,0.1)",borderRadius:2,border:"1px solid rgba(139, 115, 85, 0.2)"},children:ze.message})})]}):(0,te.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"80vh",background:"#F5F1E8",p:3},children:[(0,te.jsx)(a.A,{variant:"h5",sx:{color:"#4A4A3A",mb:2},children:"Order not found"}),(0,te.jsx)(c.A,{variant:"contained",startIcon:(0,te.jsx)(q.A,{}),onClick:()=>De("/admin/orders"),sx:{background:"#8B7355",color:"white","&:hover":{background:"#755F47"}},children:"Back to Orders"})]})}}}]);
//# sourceMappingURL=185.13d2e316.chunk.js.map