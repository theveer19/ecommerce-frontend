"use strict";(self.webpackChunkmy_ecommerce_frontend=self.webpackChunkmy_ecommerce_frontend||[]).push([[76],{1773(e,s,t){t.d(s,{A:()=>i});var n=t(4057),r=t(579);const i=(0,n.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8076(e,s,t){t.r(s),t.d(s,{default:()=>te});var n=t(9379),r=t(5043),i=t(3216),l=t(2720),a=t(3969),d=t(172),o=t(5895),c=t(2097),x=t(9806),h=t(2579),p=t(3089),A=t(1244),u=t(6128),j=t(3759),g=t(8259),m=t(7443),f=t(756),v=t(6172),b=t(1341),y=t(4375),S=t(7873),_=t(5315),C=t(2455),w=t(45),I=t(8387),W=t(1807),k=t(8128),P=t(1612),N=t(8301),D=t(6057),F=t(9066),z=t(579);const E=["className"],R=(0,k.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,"flex-start"===t.alignItems&&s.alignItemsFlexStart]}})((0,P.A)(e=>{let{theme:s}=e;return{minWidth:56,color:(s.vars||s).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}})),B=r.forwardRef(function(e,s){const t=(0,N.b)({props:e,name:"MuiListItemIcon"}),{className:i}=t,l=(0,w.A)(t,E),a=r.useContext(F.A),d=(0,n.A)((0,n.A)({},t),{},{alignItems:a.alignItems}),o=(e=>{const{alignItems:s,classes:t}=e,n={root:["root","flex-start"===s&&"alignItemsFlexStart"]};return(0,W.A)(n,D.f,t)})(d);return(0,z.jsx)(R,(0,n.A)({className:(0,I.A)(o.root,i),ownerState:d,ref:s},l))});var M=t(6185),H=t(4527),O=t(3023),T=t(1911),q=t(8776),U=t(256),L=t(9067),V=t(183),G=t(7471),Q=t(5877),Y=t(916),Z=t(6803),J=t(8315),K=t(4057);const X=(0,K.A)((0,z.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print");var $=t(1773);const ee=(0,K.A)((0,z.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),se=(0,K.A)((0,z.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone");function te(){var e,s,t,w,I,W,k,P,N,D;const{id:F}=(0,i.g)(),E=(0,i.Zp)(),[R,K]=(0,r.useState)(null),[te,ne]=(0,r.useState)(!0),[re,ie]=(0,r.useState)(!1),[le,ae]=(0,r.useState)({open:!1,message:"",severity:"success"}),[de,oe]=(0,r.useState)(!1),[ce,xe]=(0,r.useState)(""),he={pageWrapper:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",pb:8,pt:4},glassPanel:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.07)",transition:"all 0.4s ease"},card3D:{transformStyle:"preserve-3d",perspective:"1000px",transition:"transform 0.4s ease, box-shadow 0.4s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 20px 40px -10px rgba(0,0,0,0.1)"}},gradientText:{background:"linear-gradient(45deg, #111 30%, #555 90%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:900}};(0,r.useEffect)(()=>{F&&pe()},[F]);const pe=async()=>{try{ne(!0);const{data:e,error:s}=await l.N.from("orders").select("\n          *,\n          order_items (\n            id,\n            product_name,\n            quantity,\n            price_at_time,\n            image_url\n          ),\n          profiles (\n            full_name,\n            email,\n            phone,\n            avatar_url\n          )\n        ").eq("id",F).single();if(s)throw s;K(e)}catch(e){console.error("Error fetching order:",e),Ae("Error loading details","error")}finally{ne(!1)}},Ae=function(e){return ae({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})};return te?(0,z.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,z.jsx)(d.A,{})}):R?(0,z.jsx)(a.A,{sx:he.pageWrapper,children:(0,z.jsxs)(x.A,{maxWidth:"xl",children:[(0,z.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,z.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,z.jsx)(h.A,{onClick:()=>E("/admin/orders"),sx:{bgcolor:"white"},children:(0,z.jsx)(J.A,{})}),(0,z.jsxs)(a.A,{children:[(0,z.jsx)(o.A,{variant:"h4",sx:he.gradientText,children:"Order Details"}),(0,z.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["ID: ",R.order_number||R.id]})]})]}),(0,z.jsx)(c.A,{variant:"outlined",startIcon:(0,z.jsx)(X,{}),onClick:()=>window.print(),sx:{borderRadius:"20px"},children:"Print"})]}),(0,z.jsxs)(p.A,{container:!0,spacing:3,children:[(0,z.jsxs)(p.A,{item:!0,xs:12,lg:8,children:[(0,z.jsx)(A.A,{sx:(0,n.A)((0,n.A)({},he.glassPanel),{},{mb:3}),children:(0,z.jsx)(u.A,{sx:{p:3},children:(0,z.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,z.jsxs)(a.A,{children:[(0,z.jsx)(o.A,{variant:"h6",fontWeight:800,children:"Current Status"}),(0,z.jsx)(j.A,{label:R.status.toUpperCase(),sx:{mt:1,bgcolor:"#F59E0B20",color:"#F59E0B",fontWeight:800}})]}),(0,z.jsx)(c.A,{variant:"contained",startIcon:(0,z.jsx)($.A,{}),onClick:()=>{xe(R.status),oe(!0)},sx:{bgcolor:"black",borderRadius:"12px"},children:"Update Status"})]})})}),(0,z.jsx)(A.A,{sx:(0,n.A)((0,n.A)({},he.glassPanel),{},{mb:3}),children:(0,z.jsxs)(u.A,{sx:{p:0},children:[(0,z.jsx)(a.A,{sx:{p:3,borderBottom:"1px solid #eee"},children:(0,z.jsx)(o.A,{variant:"h6",fontWeight:800,children:"Items"})}),(0,z.jsx)(g.A,{children:(0,z.jsxs)(m.A,{children:[(0,z.jsx)(f.A,{sx:{bgcolor:"#f9f9f9"},children:(0,z.jsxs)(v.A,{children:[(0,z.jsx)(b.A,{children:"Product"}),(0,z.jsx)(b.A,{align:"right",children:"Price"}),(0,z.jsx)(b.A,{align:"center",children:"Qty"}),(0,z.jsx)(b.A,{align:"right",children:"Total"})]})}),(0,z.jsx)(y.A,{children:null===(e=R.order_items)||void 0===e?void 0:e.map(e=>(0,z.jsxs)(v.A,{children:[(0,z.jsx)(b.A,{children:(0,z.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,z.jsx)(S.A,{src:e.image_url,variant:"rounded"}),(0,z.jsx)(o.A,{fontWeight:600,children:e.product_name})]})}),(0,z.jsxs)(b.A,{align:"right",children:["\u20b9",Number(e.price_at_time||0).toFixed(2)]}),(0,z.jsx)(b.A,{align:"center",children:e.quantity}),(0,z.jsxs)(b.A,{align:"right",fontWeight:700,children:["\u20b9",(Number(e.price_at_time||0)*e.quantity).toFixed(2)]})]},e.id))})]})})]})})]}),(0,z.jsxs)(p.A,{item:!0,xs:12,lg:4,children:[(0,z.jsx)(A.A,{sx:(0,n.A)((0,n.A)({},he.glassPanel),{},{mb:3},he.card3D),children:(0,z.jsxs)(u.A,{sx:{p:3},children:[(0,z.jsx)(o.A,{variant:"h6",fontWeight:800,gutterBottom:!0,children:"Customer"}),(0,z.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[(0,z.jsx)(S.A,{src:null===(s=R.profiles)||void 0===s?void 0:s.avatar_url,sx:{width:56,height:56},children:(null===(t=R.profiles)||void 0===t||null===(w=t.full_name)||void 0===w?void 0:w[0])||"C"}),(0,z.jsxs)(a.A,{children:[(0,z.jsx)(o.A,{fontWeight:700,children:(null===(I=R.profiles)||void 0===I?void 0:I.full_name)||(null===(W=R.shipping_address)||void 0===W?void 0:W.name)||"Guest"}),(0,z.jsx)(o.A,{variant:"caption",color:"text.secondary",children:null===(k=R.profiles)||void 0===k?void 0:k.email})]})]}),(0,z.jsxs)(_.A,{dense:!0,disablePadding:!0,children:[(0,z.jsxs)(C.Ay,{disableGutters:!0,children:[(0,z.jsx)(B,{children:(0,z.jsx)(ee,{fontSize:"small"})}),(0,z.jsx)(M.A,{primary:(null===(P=R.profiles)||void 0===P?void 0:P.email)||"No Email"})]}),(0,z.jsxs)(C.Ay,{disableGutters:!0,children:[(0,z.jsx)(B,{children:(0,z.jsx)(se,{fontSize:"small"})}),(0,z.jsx)(M.A,{primary:(null===(N=R.shipping_address)||void 0===N?void 0:N.phone)||(null===(D=R.profiles)||void 0===D?void 0:D.phone)||"No Phone"})]})]})]})}),(0,z.jsx)(A.A,{sx:(0,n.A)((0,n.A)({},he.glassPanel),he.card3D),children:(0,z.jsxs)(u.A,{sx:{p:3},children:[(0,z.jsx)(o.A,{variant:"h6",fontWeight:800,gutterBottom:!0,children:"Summary"}),(0,z.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,z.jsx)(o.A,{color:"text.secondary",children:"Subtotal"}),(0,z.jsxs)(o.A,{fontWeight:600,children:["\u20b9",Number(R.subtotal||0).toFixed(2)]})]}),(0,z.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,z.jsx)(o.A,{color:"text.secondary",children:"Shipping"}),(0,z.jsxs)(o.A,{fontWeight:600,children:["\u20b9",Number(R.shipping_cost||0).toFixed(2)]})]}),(0,z.jsx)(H.A,{sx:{my:2}}),(0,z.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,z.jsx)(o.A,{variant:"h6",fontWeight:800,children:"Total"}),(0,z.jsxs)(o.A,{variant:"h6",fontWeight:800,color:"primary",children:["\u20b9",Number(R.total_amount||0).toFixed(2)]})]})]})})]})]}),(0,z.jsxs)(O.A,{open:de,onClose:()=>oe(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"24px"}},children:[(0,z.jsx)(T.A,{fontWeight:800,children:"Update Status"}),(0,z.jsx)(q.A,{sx:{pt:2},children:(0,z.jsxs)(U.A,{fullWidth:!0,sx:{mt:1},children:[(0,z.jsx)(L.A,{children:"Status"}),(0,z.jsxs)(V.A,{value:ce,onChange:e=>xe(e.target.value),label:"Status",children:[(0,z.jsx)(G.A,{value:"pending",children:"Pending"}),(0,z.jsx)(G.A,{value:"processing",children:"Processing"}),(0,z.jsx)(G.A,{value:"shipped",children:"Shipped"}),(0,z.jsx)(G.A,{value:"delivered",children:"Delivered"}),(0,z.jsx)(G.A,{value:"cancelled",children:"Cancelled"})]})]})}),(0,z.jsxs)(Q.A,{sx:{p:3},children:[(0,z.jsx)(c.A,{onClick:()=>oe(!1),children:"Cancel"}),(0,z.jsx)(c.A,{variant:"contained",onClick:async()=>{if(ce)try{ie(!0);const e={status:ce,updated_at:(new Date).toISOString()};"processing"===ce&&(e.processing_at=(new Date).toISOString()),"shipped"===ce&&(e.shipped_at=(new Date).toISOString()),"delivered"===ce&&(e.delivered_at=(new Date).toISOString());const{error:s}=await l.N.from("orders").update(e).eq("id",F);if(s)throw s;K(s=>(0,n.A)((0,n.A)({},s),e)),Ae("Status updated to ".concat(ce),"success"),oe(!1)}catch(e){Ae("Update failed","error")}finally{ie(!1)}},disabled:re,sx:{bgcolor:"black",borderRadius:"12px"},children:"Update"})]})]}),(0,z.jsx)(Y.A,{open:le.open,autoHideDuration:4e3,onClose:()=>ae((0,n.A)((0,n.A)({},le),{},{open:!1})),children:(0,z.jsx)(Z.A,{severity:le.severity,children:le.message})})]})}):(0,z.jsxs)(a.A,{sx:{p:5,textAlign:"center"},children:[(0,z.jsx)(o.A,{variant:"h5",children:"Order not found"}),(0,z.jsx)(c.A,{onClick:()=>E("/admin/orders"),children:"Back"})]})}}}]);
//# sourceMappingURL=76.3d59d740.chunk.js.map